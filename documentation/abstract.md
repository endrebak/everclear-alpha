Everclear: a declarative and flexible workflow management system

Workflows are descriptions of how to carry out a scientific analysis. A complete scientific analysis consists of many steps, from preprocessing data to computing and plotting the results. Each step might require different software, scripts, and computational environments. To this end, scientists have created workflow management systems. They are languages that ease the writing of workflows combined with computing environments that take care of tasks like running the pipeline and storing and remembering the intermediate results.

Many different workflow management systems (WMS) exist; these differ in whether their workflow language uses a declarative or a general-purpose language to describe their workflows. Workflows described in declarative languages are easy to read, write, and reason about; they contain no code, just data. For this reason, declarative languages might be inflexible. On the other hand, WMSes that use general-purpose languages have nearly unlimited flexibility but are more challenging to write and reason about; the steps such a workflow will perform and in what order is difficult to know ahead of time.

This paper will present the declarative system Everclear and compare it to the popular Snakemake WMS, which inspired it. The goal of Everclear is to make comprehensive, complex workflows easy to write and reason about, both for people and machines. We achieve this goal by implementing Everclear as a purely declarative language where the steps to perform (rules) are straightforward, nearly flat JSON-like data structures. To achieve equal flexibility with Snakemake, we use its idea of wildcards. However, we separate the wildcards from the input and output paths. We show that this simple unbraiding profoundly simplifies reasoning about the DAG, allowing for many innovative features.

Everclear is also the - to our knowledge - first WMS to have a runtime that is a server continually running in the background. This model allows Everclear to interpret its workflow definition files in real-time. Therefore, Everclear can give immediate feedback on the workflow as it is written, like warning of missing files, showing the SVGs or PNGs produced by the workflow, or even graphing the implied DAG of the workflow.

Lastly, Everclear automatically produces comprehensive but customizable logs about the execution of the workflow. These can serve as supplementary material, workflow sanity checks, or technical deep-dives into what and how the pipeline executes.